#summary Der Weg der Einstellungen von und in die Datenbank

= Einleitung=

Hier wird erklärt, wie die Einstellungen gespeichert werden und wie sie dann wieder ausgelesen werden. Die einzelnen Parameter, die eingestellt werden können, findest du im [Settings Handbuch des Backends]. 

Die Speicherung der Spalteneinstellungen geschieht sehr ähnlich, nur dass die einzelnen Dateien anders heißen. 

<wiki:toc max_depth="3" />

= Einstellungen speichern =

Für das Speichern der Einstellungen sind der Controller und das Model `settings` zuständig. Der Controller reicht die daten nur an das Model weiter und sorgt dafür, dass die Rückgabe der Ergebnisse funktioniert. Der Rest geschieht im Model. Das Model `settings` greift jedoch nicht direkt auf die Datenbank zu, sondern über eine Zwischenklasse vom Typ [http://docs.joomla.org/JTable jTable] (Hilfe dazu: [http://docs.joomla.org/JTable], [http://docs.joomla.org/How_to_use_the_JTable_class]). 

<a href="http://picasaweb.google.com/lh/photo/g53OJJi9_auCpaCDazjvrA?feat=embedwebsite"><img src="http://lh6.ggpht.com/_7now-UGMzi4/SzJArMCnIWI/AAAAAAAAAWI/60WUcKZnQGc/s400/2009-12-23_164538.png" width="400"/></a>

= Einstellungen laden =
Das gleiche Model, welches auch zum Speichern der Einstellungen gebraucht wird, dient auch zu auslesen. Die Einstellungen werden sowohl im Frontend, als auch im Backend genutzt. Es können entweder alle Einstellungen zusammen als Array geladen werden:

z.B.
{{{
$newmodel = JModel::getInstance('Settings', 'VerplanModel');
$settings = $newmodel->getSettings();
}}}

oder nur einzelne Einstellungen über ihre Bezeichnung in der Datenbank (siehe [Settings]):

z.B.
{{{
$settingsmodel = JModel::getInstance('Settings', 'VerplanModel');
$load_jquery = $settingsmodel->getSetting('load_jquery_frontend');
}}}

== im Frontend ==
Im Frontend können die Einstellungen mit den o.g. Funktionen geladen werden. Das Funktioniert allerdings nur solange man mit PHP arbeitet. Damit die Einstellungen auch unter Javascript verfügbar sind, gibt es ein extra View `settings` im Frontend, welches als Javascript Datei eingebunden wird. Die Url ist `?option=com_verplan&view=settings&format=js`. 

Eine bestimmte Einstellung wird mit
{{{
settings.<NAME DER EINSTELLUNG>.value
}}}
geladen. 